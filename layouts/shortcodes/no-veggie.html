{{ $csv := resources.Get "no-veggie.csv" | transform.Unmarshal }}

<!--{{ $categories := slice }}-->
<!--{{ range $csv }}-->
<!--	{{ $categories = $categories | append (index . 1) }}-->
<!--{{ end }}-->
<!--{{ $categories = $categories | sort | uniq }}-->
<!--{{ range $categories }}-->
<!--	<span id="{{ . }}-trigger">{{ . }}</span> <br />-->
<!--{{ end }}-->

{{ $parts := slice }}
{{ range $csv }}
	{{ $parts = $parts | append (index . 2) }}
{{ end }}
{{ $parts = $parts | sort | uniq }}

{{ range $parts }}
	<span id="{{ . }}-trigger">{{ . }}</span> <br />
{{ end }}

<style>

{{ range $parts }}
#{{ . }}-trigger:hover{
	color: red;
}
body:has(#{{ . }}-trigger:hover) .{{ . }} td{
	color: red;
}

.{{ . }}:hover td{
	color: red;
}

body:has(.{{ . }}:hover) #{{ . }}-trigger{
	color: red;
}
{{ end }}

table {
	display: block;
	max-width: 100%;
	overflow-y: scroll;
	height: 20em;
}

table td, table th {
	min-width: 10em;
}

table thead {
	top: 0;
	text-align: left;
	position: sticky;
}

</style>

<div id="veggies">
	<input type="searck" class="fuzzy-search" placeholder="search" />
	<table>
		<thead>
			<tr>
				<th class="sort" data-sort="name">Name</th>
				<th class="sort" data-sort="category">Category</th>
				<th class="sort" data-sort="part">Part</th>
			</tr>
		</thead>
		<tbody class="list">
			{{ range $csv }}
			{{ $category := index . 1 }}
			{{ $part := index . 2 }}
			<tr class="{{ $part }}">
				<td class="name">{{ index . 0 }}</td>
				<td class="category">{{ $category }}</td>
				<td class="part">{{ $part }}</td>
			</tr>
			{{ end }}
		</tbody>
	</table>
</div>

<script src="/javascript/list.min.js"></script>
<script>
var userList = new List('veggies', { valueNames: [ 'name', 'category', 'part' ] });
</script>
